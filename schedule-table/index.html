<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Schedule Table</title>

  <link href="../assets/css/pygments-manni.css" rel="stylesheet">

  <!-- 因为IE9会截断大于250K的CSS，所以将CSS拆分成两个 -->
  <link href="../dist/css/eams-ui.css" rel="stylesheet">
  <link href="../dist/css/eams-ui-plugin.css" rel="stylesheet">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="../dist/js/html5shiv.min.js"></script>
  <script src="../dist/js/respond.min.js"></script>
  <![endif]-->

  <script src="../dist/js/eams-ui.js"></script>
  <!--
  JS前端组件国际化
  可以使用 eams-ui.en.js 或者 eams-ui.zh.js
  -->
  <script src="../dist/js/eams-ui.zh.js"></script>
  <script src="../dist/js/echarts-all.js"></script>
</head>

<body>

<div class="container-fluid">
    <div class="row">
  <div class="col-sm-12">
    <section>
      <h2>Schedule Table</h2>

      <p>
        课表
      </p>
    </section>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title"><span><i class="fa fa-calendar"></i> </span>我的课表</h3>
  </div>
  <table class="table table-bordered table-center-text" id="table"></table>
</div>

<div>
  <input id="activity" style="width:65%;" value='{"id": 7,"weekdayIndex": 5,"startTime": 800,"endTime": 930,"weeks": [1,2,3,4,5,6,7,8,9,10,11],"content": "sssssd"}'/>
  <button type="button" class="btn btn-primary" id="add">添加Activity</button><br/>
  <input id="activityId" value="7"/> <button type="button" class="btn btn-primary" id="del">通过id删除Activity</button><br/>
  <label>行号:</label><input id="columnid" value="5"/>
  <label>列号:</label><input id="rowid" value="1" placeholder="row id"/> <button type="button" class="btn btn-primary" id="del2">通过行列号删除</button>
  <br/>
  <button type="button" class="btn btn-primary" id="invert">倒置</button>
  <button type="button" class="btn btn-primary" id="getActivities">Activities的JSON数组</button>
</div>
<script>
  $(function() {
    var $table = $("#table");

    $.getJSON("table.json", function(result) {
      $table.scheduleTable({
        weekdays: result.weekdays,
        units: result.units,
        activities:result.activities,
        disabled:[
          {
            columnid:2,
            rowid:2
          }
        ],
        restUnits: [
          {title: "午休", afterUnit:4}
        ],
        clickCallback: function (e) {
          var $target = $(e.target);
          $table.scheduleTable('toogleHighlight', $target.data('columnid'), $target.data('rowid'));
        },
        hoverCallback: function(e) {
          var $target = $(e.target);
          $target.tooltip({
            placement: 'right',
            title: $target.text(),
            container: 'table'
          });
        }
      });
    });

    $("#invert").click(function(){
      $table.scheduleTable('invert');
    });

    $("#add").click(function(){
      $table.scheduleTable('addActivity', JSON.parse($("#activity").val()));
    });

    $("#del").click(function(){
      $table.scheduleTable('removeActivity', parseInt($("#activityId").val()));
    });

    $("#del2").click(function(){
      $table.scheduleTable('removeActivities', parseInt($("#columnid").val()), parseInt($("#rowid").val()));
    });

    $("#getActivities").click(function(){
      alert($table.scheduleTable('getActivities'));
    });
  });
</script>

  </div>
</div>

<hr/>
<div class="row">
  <div class="col-sm-12">
    <section>
      <h2>Options</h2>
    </section>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <table class="table table-striped table-hover table-condensed">
      <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Default</th>
        <th>Description</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>weekdays</td>
        <td>array of object</td>
        <td>[]</td>
        <td>
          example:
          <br>
          <code>weekdays: [{ title: "星期一"},{ title: "星期二"}}</code>
        </td>
      </tr>
      <tr>
        <td>units</td>
        <td>array of object</td>
        <td>[]</td>
        <td>
          example:
          <br>
          <code>units: [{ title: "1",startTime: 800,endTime: 840},{title: "2",startTime: 900,endTime: 940}}</code>
        </td>
      </tr>
      <tr>
        <td>activities</td>
        <td>array of object</td>
        <td>[]</td>
        <td>examples:<br>
          <code>activities: [<br>
            {<br>
              id: 1,<br>
              weekdayIndex: 1,<br>
              startTime: 800,<br>
              endTime: 930,<br>
              weeks: [1,2,3,4,5,6,7,8,9,10,11],<br>
              content: "微积分 1号楼202"<br>
            }, ...]
          </code>
        </td>
      </tr>
      <tr>
        <td>disabled</td>
        <td>array of object</td>
        <td>[]</td>
        <td>examples:<br>
          <code>disabled:[{columnid:2,rowid:2}, ...]</code>
        </td>
      </tr>
      <tr>
        <td>restUnits</td>
        <td>array of object</td>
        <td>[]</td>
        <td>examples:<br>
          <code>restUnits:[{title: "午休", afterUnit:4}, ...]</code>
        </td>
      </tr>
      <tr>
        <td>invert</td>
        <td>boolean</td>
        <td>false</td>
        <td>是否倒转</td>
      </tr>
      <tr>
        <td>clickCallback</td>
        <td>function</td>
        <td></td>
        <td>点击一个格子触发的函数</td>
      </tr>
      <tr>
        <td>hoverCallback</td>
        <td>function</td>
        <td></td>
        <td>hover事件触发的函数</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<hr/>

<div class="row">
  <div class="col-sm-12">
    <section>
      <h2>Methods</h2>
    </section>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <h4>
      <code>$().scheduleTable(options)</code>
    </h4>
    <p>初始化scheduleTable</p>
    <hr/>
    <h4>
      <code>.scheduleTable('getActivity', id)</code>
    </h4>
    <p>通过id获得activitiy的json数组</p>
    <hr/>
    <h4>
      <code>.scheduleTable('addActivity')</code>
    </h4>
    <p>添加activitiy</p>
    <hr/>
    <h4>
      <code>.scheduleTable('removeActivity', id)</code>
    </h4>
    <p>通过id删除activitiy</p>
    <hr/>
    <h4>
      <code>.scheduleTable('removeActivities', columnid, rowid)</code>
    </h4>
    <p>通过行列号删除该格子内所有activitiy</p>
    <hr/>
    <h4>
      <code>.scheduleTable('getActivities')</code>
    </h4>
    <p>所有activitiy的json数组</p>
    <hr/>
    <h4>
      <code>.scheduleTable('highlight')</code><code>.scheduleTable('unhighlight')</code>
    </h4>
    <p>高亮和取消高亮</p>
    <hr/>
    <h4>
      <code>.scheduleTable('invert')</code>
    </h4>
    <p>倒置</p>
    <hr/>
    <h4>
      <code>.scheduleTable('highlightList')</code>
    </h4>
    <p>得到所有高亮的格子</p>
  </div>
</div>

</div>

</body>

</html>

