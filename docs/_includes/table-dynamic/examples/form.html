<form class="form-inline">

  <div class="form-group">
    <label for="currentPage" class="control-label">currentPage</label>
    <input type="text" name="currentPage" id="currentPage" class="form-control"/>
  </div>

  <div class="form-group">
    <label for="rowsPerPage" class="control-label">rowsPerPage</label>
    <input type="text" name="rowsPerPage" id="rowsPerPage" class="form-control"/>
  </div>

  <div class="form-group">
    <label for="orderBy" class="control-label">orderBy</label>
    <input type="text" name="orderBy" id="orderBy" class="form-control"/>
  </div>

  <table id="table">
    <thead>
    <tr>
      <th></th>
      <th>
        <a href="#" data-order-by="A">Title A</a>
      </th>
      <th>
        <a href="#" data-order-by="B">标题B</a>
      </th>
      <th>
        <a href="#" data-order-by="C">标题C</a>
      </th>
      <th>标题D</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><input type="checkbox" name="row.id"/></td>
      <td>a</td><td>b</td><td>c</td><td>d</td>
    </tr>
    <tr>
      <td><input type="checkbox" name="row.id"/></td>
      <td>a</td><td>b</td><td>c</td><td>d</td>
    </tr>
    </tbody>
  </table>
</form>

<script>
  $(function() {

    var $form = $('form');
    var $table = $("#table");

    var request = function(pageObject, orderObject) {
      var $currentPage = $form.find(':text[name=currentPage]');
      var $rowsPerPage = $form.find(':text[name=rowsPerPage]');
      var $orderBy = $form.find(':text[name=orderBy]');

      $currentPage.val(pageObject.currentPage);
      $rowsPerPage.val(pageObject.rowsPerPage);

      var orderBy = [];
      $.each(orderObject, function(name, order) {
        if(order == 'none') {
          return;
        }
        orderBy.push(name + ' ' + order);
      });
      $orderBy.val(orderBy.join(','));

      setTimeout(function() {
        $form.submit();
      }, 2000);
    }

    $table.dynamicTable({
      orderOption: {
        'A': 'asc',
        'B': 'desc'
      },
      menus: [
        {
          title: '菜单1',
          callback: function() {
            var rowIds = $table.dynamicTable('getSelectedRows');
            // do something with rowIds
            // $form.submit();
          }
        },
        {
          title: '菜单2',
          callback: function() {
            alert('菜单2');
          }
        },
      ],
      pageOption: {
        currentPage: 1,
        totalPages: 20,
        totalRows: 202
      }
    }).on('pageChange', function(event, pageObject) {
      request(pageObject, $table.dynamicTable('getOrderObject'));
    }).on('orderChange', function(event, orderObject) {
      request($table.dynamicTable('getPageObject'), orderObject);
    });
  });
</script>
